<!-- <h1>Manual Mode</h1> -->
<div class="container">
    <div class="flex justify-center">
        <div class="panel panel--control">
            <h2>Control Panel - {{isHatsSearch ? "Hat Mode" : "Weapon Mode"}}</h2>
            <div>
                <button (click)="startButtonClicked()" class="button button-small-green">Start Batch</button>
                <button (click)="resetButtonClicked()" class="button button-small-red">Reset</button>
                <button (click)="weaponsButtonClicked()" [disabled]="!this.isHatsSearch"
                    class="button button-small-blue">Weapons</button>
                <button (click)="hatsButtonClicked()" [disabled]="this.isHatsSearch"
                    class="button button-small-yellow">Hats</button>
            </div>
            <div class="flex-col">
                <div class="py-2">
                    <label for="page-number">Current {{isHatsSearch ? "Page" : "Item"}}: </label>
                    <input [(ngModel)]="currentPage" class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500"
                        step="1" title="Enter a positive number">
                </div>
                <div class="py-2">
                    <label for="page-number">Batch Size: </label>
                    <input [(ngModel)]="batchSize" class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500"
                        step="1" title="Enter a positive number">
                    @if(!isHatsSearch)
                    {
                    <button (click)="showAllWeaponsButtonClicked()" class="button button-small-blue">Show All</button>
                    }
                </div>
                <div>
                    <label class="my-2 py-2">{{statusLabel}}</label>
                </div>
            </div>
        </div>
    </div>
    <steam-item-search class="mx-auto" [getItems]="loadWeapons" (selectedClasses)="onClassesChanged($event)"
        (selectedSlots)="onSlotsChanged($event)" (searchByNameValue)="onSearchByNameChange(($event))" />
    <div class="panel panel--weapon-list">
        <div class="grid-item flex flex-col justify-between h-full" *ngFor="let weapon of weaponsCollection; let i = index">
            <strong>{{ i + 1 }}. <a href="{{weaponUrlPartial}}{{weapon.name}}">{{weapon.name}} ({{weapon.tradesCount ?? "Nun"}})</a></strong> 
            <p>Stock: {{weapon.currentStock ?? "Nun"}}</p>
            <div class="flex flex-col align-bottom">
                <div class="flex justify-between">
                    <button (click)="addStockCount(weapon.id, weapon.currentStock)" [attr.title]="'Add Stock Count'" class="button button-small-green">+</button>
                    <button (click)="addTradesCount(weapon.id, weapon.tradesCount)" [attr.title]="'Add Trades Count'"  class="button button-small-blue">+</button>
                    <button (click)="removeStockCount(weapon.id, weapon.currentStock)" [attr.title]="'Remove Stock Count'" class="button button-small-red">-</button>
                </div>
            </div>
        </div>
    </div>
</div>
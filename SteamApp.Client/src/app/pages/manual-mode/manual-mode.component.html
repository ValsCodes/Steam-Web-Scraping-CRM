<div class="container p-4">
  <div class="flex px-5">
    <h2 class="text-2xl font-semibold text-gray-500">Manual Mode</h2>
  </div>

  <div class="flex justify-start gap-x-2 m-auto">

    <!-- Hats Control Panel -->
    <div class="panel panel--control">
      <h2>Hats Control Panel</h2>

      <div class="flex gap-2 mt-4">
        <button (click)="startHatsBatch()" class="button button-small-success">
          Start Batch
        </button>
        <button (click)="resetHatsButtonClicked()" class="button button-small-danger">
          Reset
        </button>
      </div>

      <div class="flex justify-start gap-x-2">
        <div class="py-2">
          <label>Current Page:</label>
          <input class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500" [value]="currentPage"
            (input)="currentPage = $any($event.target).valueAsNumber">
        </div>

        <div class="py-2">
          <label>Batch Size:</label>
          <input class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500" [value]="hatsBatchSize"
            (input)="hatsBatchSize = $any($event.target).valueAsNumber">
        </div>
      </div>

      <div>
        <label class="my-2 py-2">{{ hatStatusLabel }}</label>
      </div>
    </div>

    <!-- Weapons Control Panel -->
    <div class="panel panel--control">
      <h2>Weapons Control Panel</h2>

      <div class="flex gap-2 mt-4">
        <button (click)="startWeaponsBatch()" class="button button-small-success">
          Start Batch
        </button>
        <button (click)="resetWeaponsButtonClicked()" class="button button-small-danger">
          Reset
        </button>
        <button (click)="showAllWeaponsButtonClicked()" class="button button-small-primary">
          Show All
        </button>
      </div>

      <div class="flex gap-x-2">
        <div class="py-2">
          <label>Current Item:</label>
          <input class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500" [value]="currentIndex"
            (input)="currentIndex = $any($event.target).valueAsNumber">
        </div>

        <div class="py-2">
          <label>Batch Size:</label>
          <input class="w-[5rem] ml-2 pl-2 rounded-md" type="number" min="1" max="500" [value]="weaponsBatchSize"
            (input)="weaponsBatchSize = $any($event.target).valueAsNumber">
        </div>
      </div>

      <div>
        <label class="my-2 py-2">{{ weaponStatusLabel }}</label>
      </div>
    </div>

    <!-- Links -->
    <div class="panel panel--control w-[18.75rem] h-auto">
      <h2>Links</h2>
      <ul class="list-disc list-inside ml-2 marker:text-black marker:text-lg">
        <li>
          <strong>
            <a href="https://backpack.tf/spreadsheet" target="_blank" rel="noopener noreferrer"
              class="hover:text-blue-600">
              BackpackTF Prices URL
            </a>
          </strong>
        </li>
        <li>
          <strong>
            <a href="https://steamcommunity.com/id/_Val/inventory" target="_blank" rel="noopener noreferrer"
              class="hover:text-blue-600">
              Inventory
            </a>
          </strong>
        </li>
        <li>
          <strong>
            <a href="https://steamcommunity.com/market/" target="_blank" rel="noopener noreferrer"
              class="hover:text-blue-600">
              Community Market
            </a>
          </strong>
        </li>
      </ul>
    </div>

    <!-- Search -->
    <div class="panel panel--control w-[18.75rem] h-auto">
      <h2>Search</h2>
      <app-copy-link [textToCopy]="'Strange Part:'" [textToShow]="'< Strange Part: >'">
      </app-copy-link>
    </div>
  </div>

  <!-- Filters -->
  <div class="flex items-center gap-2 justify-center">
    <app-text-filter [SearchLabel]="'Item Name'" [SearchTextBind]="searchByNameFilterControl"
      (filterChange)="onTextFilterChanged($event)">
    </app-text-filter>

    <app-checkbox-filter [CheckboxCollection]="classFilters" [CheckboxCollectionLabel]="'Class Filters'"
      (filterChange)="onClassFiltersChanged($event)">
    </app-checkbox-filter>

    <app-checkbox-filter [CheckboxCollection]="slotFilters" [CheckboxCollectionLabel]="'Slot Filters'"
      (filterChange)="onSlotFiltersChanged($event)">
    </app-checkbox-filter>

    <button (click)="ClearAllFilters()" class="button button-small-danger">
      Clear Filters
    </button>
  </div>

  <!-- Weapon List -->
  <div class="panel panel--weapon-list">
    <div class="grid-item flex flex-col justify-between h-full"
      *ngFor="let weapon of weaponsCollection; trackBy: trackById; let i = index">

      <strong>
        {{ i + 1 }}.
        <a [href]="weaponUrlPartial + weapon.name">
          {{ weapon.name }} ({{ weapon.tradesCount ?? 'Nun' }})
        </a>
      </strong>

      <p>Stock: {{ weapon.currentStock ?? 'Nun' }}</p>

      <div class="flex flex-col mt-4">
        <div class="flex justify-between">
          <button class="button button-small-success" (click)="addStockCount(weapon.id)">
            +
          </button>

          <button class="button button-small-primary" (click)="addTradesCount(weapon.id)">
            +
          </button>

          <button class="button button-small-danger" (click)="removeStockCount(weapon.id)">
            -
          </button>
        </div>
      </div>
    </div>
  </div>
</div>